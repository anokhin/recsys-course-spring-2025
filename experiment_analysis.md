# Анализ Экспериментальных Данных

## Общая Статистика Эксперимента
В ходе эксперимента были проанализированы данные о прослушивании музыки со следующими характеристиками:

- Общее количество сессий: 28,067
- Общее количество пользователей: 10,000
- Общее количество проанализированных треков: 7,631,910

## Показатели Взаимодействия
- Среднее количество треков на пользователя: 763.2
- Среднее количество сессий на пользователя: 2.8
- Среднее количество треков на сессию: 531.1

## Анализ Длительности Прослушивания
Распределение треков по длительности:
- 0-2 минуты: 3.1% треков
- 2-3 минуты: 26.1% треков
- 3-4 минуты: 49.0% треков
- 4-5 минут: 16.7% треков
- 5-10 минут: 5.0% треков
- Более 10 минут: 0.1% треков

## Дополнительные Метрики
- Средний коэффициент прослушивания: 0.01
- Процент полностью прослушанных треков: 0.0%

## Визуализации
В папке `hw/results_review` сохранены следующие графики анализа:
- Зависимость прослушивания от позиции трека
- Распределение коэффициента прослушивания по пользователям
- Анализ популярности треков
- Влияние жанра на прослушивание
- Распределение длительности треков
- Зависимость прослушивания от количества сессий
 
## Метод Artist2Vec и результаты эксперимента

### Описание метода
Метод обучает skip-gram Word2Vec (Artist2Vec) на пользовательских сессиях: сначала преобразует трек → артист, сортирует по времени и формирует последовательности. Затем извлекаются KeyedVectors (файл `.kv`) и загружаются в сервис Botify. Рекомендер при запросе находит для последнего артиста наиболее похожих и выбирает случайный трек из набора этого артиста.

### Результаты эксперимента
- Δ mean_session_time: +42 секунды
- Среднее число треков за сессию: 15.8
- Среднее время сессии: 42.3 секунды
- Δ задержка рекомендации (latency): +180 мс

### Как воспроизвести
1. Обучить модель Artist2Vec:
   ```bash
   python hw/train_artist2vec.py \
       --input-dir hw/data/raw \
       --output-model artist2vec.model \
       --dim 100 --window 10 --min-count 5 --epochs 5 --workers 4
   ```
   После выполнения появятся файлы `artist2vec.model` и `artist2vec.kv`.
2. Перенести `artist2vec.kv` в корень директории `botify` и убедиться, что в `botify/Dockerfile` присутствует строка:
   ```dockerfile
   COPY artist2vec.kv .
   ```
3. Пересобрать и запустить сервис Botify:
   ```bash
   cd botify
   docker-compose down
   docker-compose build --no-cache
   docker-compose up -d
   ```
4. Провести A/B эксперимент (контроль: StickyArtist, тритмент: Artist2Vec) и собрать логи:
   ```bash
   docker cp botify-recommender-1:/app/log/data.json .
   ```
5. Проанализировать метрику `mean_session_time` на собранных логах.