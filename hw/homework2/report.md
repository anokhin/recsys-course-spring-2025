# Домашнее задание 2 отчет

В этой домашке я улучшал рекомендации сервиса botify (относительно рекомендатора StickyArtist - который рекомендует треки того же арстиста). Я запускал симуляцию сервиса рекомендаций и полноценный A/B тест, где мой кастомный recommender был тритментов, а StickyArtst -- контролем. Я пытался (и добился) статистически значимо улучшить метрику mean_session_time по сравнению с рекомендером StickyArtist.



Мой рекомендер строит взвешенный направленный граф переходов между треками и артистами на основе истории прослушиваний пользователей.

Поддерживаются две основные структуры: 
1. **Граф переходов между треками** - где узлы это треки, а направленные ребра отображают переходы от одного трека к другому с весами, соответствующими частоте таких переходов??
2. **Граф переходов между артистами** - то же самое для артистов

Для каждого пользователя система накапливает историю предпочтений треков и артистов, которая используется для персонализации рекомендаций. 



Алгоритм расчета рекомендаций\:

1. Расчет базового PageRank для всех треков в графе

2. Расчет PageRank для трека с учетом истории пользователя

3. Вероятностный выбор следующего трека с балансом между популярностью, персонализацией и разнообразием

   ```python
   combined_weight = (0.3 * transition_weight + 0.3 * page_rank + 0.4 * avg_listen_time)
   ```



## Результаты A/B эксперимента

![img](./CleanShot%202025-05-04%20at%2012.50.27@2x.png)

## Инструкция по запуску

Запустить

```
make
```

в корне.

Это должно

1. создать virtualenv
2. установить в него все зависимости
3. запустить докер компоуз - и поднять инстансы рекоммендеров, redis, nginx
4. после успешного запуска - запустить симуляцию для A/B тестирования
5. после этого сохранить данные по результатам симуляции в директорию data4exp

Затем можно воспользоваться  [ноутбуком](./AnalyzeResults.ipynb) чтобы проверить, как поменялись метрики


